# sarviewer

This repository is intended to give a simple way to measure resources usage (CPU, RAM...) in a machine. It uses sar to retrieve data and gnuplot to generate graphs from it.

Useful to retrieve and analyze data during stress tests.

#### Requirements

* Install sysstat and gnuplot in your system using your package manager:

        # Debian & based
        apt-get install sysstat gnuplot
        # RHEL & based
        yum install sysstat gnuplot
        
#### Usage

* Clone this repo or download it (ZIP format). Note that the the files contained in data/ and graphs/ folder are only for sample purposes.
* Give execution permissions to the *.sh scripts on this repo
* The repo can be used in two modes, depending on your needs. See below.

##### Mode1: Begin collecting data and generate graphs

* Launch the `data_collector.sh` script if you want to begin collecting data (for example during a stress test). Specify the number of samples and interval to take each sample. Notice that whenever you want you can cancel the collector with Ctrl+C, interrumpting the collection of data. If it is cancelled you will need to launch the script plotter.sh manually. The data and graphs generated will overwrite the samples given in this repo in data/ and graphs/ folder respectively. The `data_collector.sh` in this forked repo has been extended to being able to pass the number of samples and interval on the command line unattended. So you can do logging to 10 samples for 1 second intervals using command like. 

        ./data_collector.sh 10 1

* Once the script has finished the data collection or you have cancelled it (and subsequently launched plotter.sh) you can analyze the resource usage in the graphs (PNG format) that have been generated in graphs/ folder of this repo.

##### Mode2: Read data from sar daemon and generate graphs

* If you just want to read the data already generated by sar daemon in your system, use the script `system_data_reader.sh` and choose the sa* file you want to parse to generate the corresponding graphs. Remember that sar daemon should have been previously enabled in /etc/default/sysstat

#### Samples

Some samples of graphs generated.

* RAM - 4 possible charts for ram.png, ram2.png and ram3.png

![Alt text](/graphs/ram.png?raw=true "RAM usage graph")

ytic 0,1000

![Alt text](/graphs/ram2.png?raw=true "RAM usage graph")

ytic 0,250 with canvas size 640,900

![Alt text](/graphs/ram3.png?raw=true "RAM usage graph")

ytic 0,250 with canvas size 640,900 & commit memory charted

![Alt text](/graphs/ram4.png?raw=true "RAM usage graph")

* CPU

![Alt text](/graphs/cpu.png?raw=true "CPU usage graph")

* Load Average

![Alt text](/graphs/loadaverage.png?raw=true "Load average")

* Processes

![Alt text](/graphs/proc.png?raw=true "Processes created per second")
